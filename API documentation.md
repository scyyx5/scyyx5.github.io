1. **Overview** 

    Credit risk visualization API is a JSON-based Django API. All requests are made to endpoints begin with: http://127.0.0.1:8000/api/{str:version}. Current version of this project is v4. The API is developed **following design principle**.

<!---
Our API is fully documented[ here](https://app.swaggerhub.com/apis-docs/Yujiao/pethelper/v3)[(alternative link here)](http://3.83.45.21/resources/petHelper/) Because of page limitation, we only provide four examples here. 
-->

- Request and response formats 

    In general, the Credit risk visualization API uses HTTP POST requests with JSON arguments and  JSON  responses.  Request  authentication  is  via  OAuth  2.0  using  the Authorization request header. 

- Status Codes 

    Our status code is returned using[ standard HTTP code syntax](https://www.restapitutorial.com/httpstatuscodes.html). Depending on the status code, the response body may be in JSON format or return no content. 

- Successful 

    |Code |Description |
    | - | - |
    |200-OK |The  request  has  been  fulfilled  and  resulted  in  a  new resource being created. |
    |201-Created |The  request  has  been  fulfilled  and  resulted  in  a  new resource being created. |
    |204-No Content |The server fulfilled the request but don’t need to return an entity-body |

- Errors 

    |Code |Description |
    | - | - |
    |400-Bad Request |The  request  was  unacceptable,  often  do  to  missing  a required parameter. |
    |401- Unauthorized |The token was invalid or you do not have authentication for this API |
    |404-Not Found |The request resource doesn’t exist |
    |5xx  Sercer Errors |Server error(This one is rare) |
2. **Authentication guide** 

    Our  API  use [ token-based  authentication](https://www.okta.com/identity-101/what-is-token-based-authentication/).  For  the  API  related  to  any  personal sensitive data, we need the token generated by this user. This allows us to ensure user privacy. 

- create your own account and get token 

    You can create your own account by sending a request to register api, get the token by send request to log in api. More detailed about how to use it can be found below.  

- test account 

    You can use the below account for testing: 

    username: test@gmail.com

    password: test123456 

3. **Core resources** 


    |- |**Authentication** |**Description** |
    | - | - | - |
    | GET / | 🔓 No | List all api root resources |
    | POST api/v4/login | 🔓 No | log in to the account |
    | POST api/v4/Register | 🔓 No | Register a new account. |
    | POST api/v4/adjust/ | 🔒 Yes | Adjust the slop for apc analysis |
    | POST api/v4/download_graph/ | 🔒 Yes | download all the graphs |
    
4. **Example** 
- log in              🔓Not Authenticated
    POST api/v4/login

    This is used to log in to an existing accounts. Returns token. 

    Request Parameters: 

    | Field |Type | Required |Description |
    | - | - | - | - |
    | email | String | Yes | Email of the user|
    | password | String | Yes | Password of the user|

    Response Parameters:
    | Field |Type |Description |
    |-|-|-|
    |token|String|Token of user|

    Possible HTTP code:

    |Code |Description |
    | - | - |
    |201-Created |The  request  has  been  fulfilled  and  resulted  in  a  new resource being created. |
    |400-Bad Request |The  request  was  unacceptable,  often  do  to  missing  a required parameter. |
    |404-Not Found |The request resource doesn’t exist |
    |5xx  Sercer Errors |Server error(This one is rare) |

    Example request: 
    ```
    POST http://127.0.0.1:8000/api/v4/login/
    Content-Type: application/json
    Accept: application/json
    Accept-Charset: utf-8
    {
    "email": "test@gmail.com",
    "password": "test123456",
    }
    ```

    ```
    HTTP/1.1 200 OK
    Content-Type: application/json; charset=utf-8
    {
    "token": "c83e4456ca2b14cd54ccbb96074169e7f46e34d8"
    }
    

